---
title: "California Wildfire Correlation"
authors: "Ainsley Snell and Lillian Heitz"
format: revealjs
editor: visual
---

## Intro
- Our project is inspired by these California Wildfires and their disastrous aftermath that have left California in a vulnerable state. 
-  We aim to predict current wildfire risk across California’s 58 counties to draw correlation as to why certain counties are more at risk at others.
- We plan to do this using past fire data, including 2020 wildfire perimeters, alongside historical weather data (average monthly temperature and precipitation).
- Our data is taken from the California National Resource Agency (CNRA).



## Introduction

-   We are looking at wildfire parameters, precipitation, and average temperatures to see if there is correlation.

## 2020 Wildfire Parameters

```{r}
library(tidyverse)
library(sf)
library(tmap)
library(geojsonsf)
library(readxl)
library(geodata)


fires <- geojson_sf("California_Fire_Perimeters_(1950%2B).geojson" )

recent_fires <- fires |>
  filter( YEAR_ == 2020 )

US <- gadm("USA", level = 2, path = getwd())
CA <- US[US$NAME_1 == "California", ]
CA <- st_as_sf(CA)

tmap_options( basemap.server = "USGS")
tmap_mode( "view" )


tm_shape(CA) + tm_polygons(fill= "grey", col = "white")+
  
 tm_shape( recent_fires ) +
  tm_polygons( id = "FIRE_NAME", fill = "firebrick")

```

## 2020 Wildfire Perimeters

-   This map displays wildfire perimeters in 2020.
-   Fires are more concentrated in wooded areas with great amounts of burnable fuel (Redwood Area).
-   Understanding past fire-affected areas is crucial as these landscapes are more susceptible to extreme weather patterns, influencing present fire risks.

## 2020 Precipitation Map

-   Northern coastal and mountainous counties had higher precipitation averages (Ex: Del Norte, Humboldt, Trinity)
-   Many southern and inland central counties had lower precipitation averages


```{r}
library(readxl)
library(tidyverse)
library(geodata)
library(sf)
library(tmap)

precipitation_data <- read_excel("california_precipitation 1.xlsx") 
precipitation_data <- precipitation_data |>
  mutate( Name = sub( pattern = " County", replacement = "", x = Name, fixed =TRUE ))

yearly_avg_precipitation <- precipitation_data |>
group_by(Name, Year) |>
  summarize(avg_precip=mean(Precipitation))
ca_2020_precip <- yearly_avg_precipitation |> 
  filter( Year == 2020 )

US <- gadm("USA", level = 2, path = getwd())
CA <- US[US$NAME_1 == "California", ]
CA <- st_as_sf(CA)

ca_precip_map <- CA |>
  left_join(ca_2020_precip, by = c("NAME_2" = "Name"))

tmap_options(basemap.server="OpenStreetMap")
tmap_mode("view")

tm_shape(ca_precip_map) + 
  tm_polygons( fill = "avg_precip", palette = "Blues", 
              id = "NAME_2", title = "Avg Precipitation (2020)") +
  tm_layout(title = "California County Precipitation - 2020")

```

## 2020 Avg. Precipitation Map
-   Northern coastal and mountainous counties had higher precipitation averages (Ex: Del Norte, Humboldt, Trinity)
-   Many southern and inland central counties had lower precipitation averages

## Comparison

![](twoclimategraph.png)

## Correlation

-   Despite higher rainfall in northern California, wildfires still occurred extensively there.

-   While low precipitation is generally associated with increased wildfire risk, the presence of large fires even in relatively wetter counties suggests that precipitation alone does **not** fully determine fire activity; fuel loads, wind patterns, and temperature play major roles as well.

-   To accurately predict wildfires, we need to assess these attributes alongside the precipitation data.


## 2020 Avg. Temperature Map

```{r}
temperature_data <- read_csv("california_temperature.csv")


temperature_data <- temperature_data |>
  mutate( Name = sub( pattern = " County", replacement = "", x = Name, fixed =TRUE ))

yearly_avg_temperature <- temperature_data |>
group_by(Name, Year) |>
  summarize(avg_temp=mean(Temperature))

ca_2020_temp <- yearly_avg_temperature |> 
  filter( Year == 2020 )

US <- gadm("USA", level = 2, path = getwd())
CA <- US[US$NAME_1 == "California", ]
CA <- st_as_sf(CA)

ca_temp_map <- CA |>
  left_join(ca_2020_temp, by = c("NAME_2" = "Name"))

tmap_options(basemap.server="OpenStreetMap")
tmap_mode("view")

tm_shape(ca_temp_map) + 
  tm_polygons( fill = "avg_temp", palette = "Blues", 
              id = "NAME_2", title = "Avg temperature (2020)") +
  tm_layout(title = "California County Temperature- 2020")


```

## 2020 Avg. Temperature Map

- Northeastern Counties such as Modoc, Lassen, Plumas, Sierra, and Mono have the lowest temperature ranging from 45-50 degrees.

- Southeastern Counties such as San Bernardino, Imperial, and Riverside have the highest temperatures ranging from 65-80 degrees.

- Central Counties fall mostly in the 55-65 degrees range.

## Comparison


![](climategraph.png)

## Analysis
- Most fires occurred in areas that are both relatively dry and warm (northern-central region).

- However, fires did not occur in the hottest or driest zones, possibly due to less vegetation to burn there.

- We need to look at vegetation density next to conclude our hypothesis that areas with a combination of moderate to low precipitation, warm temperatures, and significant vegetation are most at risk for wildfires.


## Temperature Statistics 

```{r}
library(tinytable)
library(tidyverse)

temperature_data <- read_csv("california_temperature.csv")


temperature_data <- temperature_data |>
  mutate( Name = sub( pattern = " County", replacement = "", x = Name, fixed =TRUE ))

yearly_avg_temperature <- temperature_data |>
group_by(Name, Year) |>
  summarize(avg_temp=mean(Temperature))
ca_2020_temp <- yearly_avg_temperature |> 
  filter( Year == 2020 )

temp_summary2020 <- ca_2020_temp |>
  ungroup() |>
  summarize( "2020 Average temperature" = mean( avg_temp ),
             "2020 Median temperature" = median( avg_temp))
tt(temp_summary2020,  digits = 4)

ca_2015_temp <- yearly_avg_temperature |> 
  filter( Year == 2015 )
temp_summary2015 <- ca_2015_temp |>
  ungroup() |>
  summarize( "2015 Average temperature" = mean( avg_temp ),
             "2015 Median temperature" = median( avg_temp))
tt(temp_summary2015, digits = 4)

```




## Analysis of Statistics
- With our summary statistics of average temperature and in the future average precipitation for each California county from 2015 to 2020, we plan to analyze climate trends over time. By calculating year to year differences, we can identify whether counties are experiencing increasing temperature, decreasing precipitation, or both. These trends allow us to project likely climate conditions for 2025, such as higher average temperatures or reduced precipitation.
- We can use these “current climate conditions” in our final assessment of California’s counties current wildfire risk along with past wildfire history and past vegetation density history. 
